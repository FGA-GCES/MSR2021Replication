# Experiment 01 - 02/15/2022

The first experiment consists of using the MSR2021Replication project with different datasets. The dataset used will be the [Stack Overflow questions under the React Native tag](../retrieve_so_rn_dataset.md).

## Create file tree

To run the experiment, new folders were created to contain the generated data. See the file tree bellow:

```
├── tcc_data/
│   ├── processed/
│   │   └── SO_T_output_Mallet/
│   │       └── topics/
|   |
│   └── raw/
|       └── so_questions.csv
|
├── tcc_mallet/
│   ├── so_data/
│   └── so_results/
|
└── tcc_topics/
```

The dataset used was ziped and added at `tcc_data/raw/so_questions.csv.zip`, before running the processes unzip the CSV file. All scripts used at the `notebooks/` folder were adapted to fit this experiment's file tree.

## Clean the dataset data

The first step is to clean the datasets data using the `clean_stackoverflow_data.py` script. Enter the `notebooks/` folder and run the following command:

```sh
python3 clean_stackoverflow_data.py
```

This will generate another dataset CSV file at `tcc_data/processed/so_questions.csv` without HTML tags and stopwords.

## Export dataset to Mallet

The Mallet tool needs the questions input to be separated into diferent documents, the `export_so_to_mallet.py` script creates `.txt` files to all questions on the CSV dataset.

For this experiment the files were created using only the questions title.

To run the script, run the following command at the `notebooks/` folder.

```sh
python3 export_so_to_mallet.py
```

The files for each questions will be at the `tcc_mallet/so_data/` folder. The file names will be the question's ID.

## Run Mallet

With the questions separeted into diferent files, run the mallet tool with the following comands:

```sh
mallet/mallet-2.0.8/bin/mallet import-dir --input tcc_mallet/so_data/ --output tcc_mallet/so.mallet --keep-sequence --remove-stopwords --extra-stopwords tcc_mallet/extra_stopwords_so.txt
```

```sh
mallet/mallet-2.0.8/bin/mallet train-topics --random-seed 100 --input tcc_mallet/so.mallet --num-topics 15 --optimize-interval 20 --output-state tcc_mallet/so-topic-state.gz --output-topic-keys tcc_mallet/so_keys.txt --output-doc-topics tcc_mallet/so_composition.txt --diagnostics-file tcc_mallet/so_results/so_diagnostics.xml
```

## Understand the mallet output

To understand the mallet output the following script is used to create `.csv` tables to separate the files in the topics using the output generated by the mallet tool.

```sh
python3 parse_topics_composition.py
```

To evaluate the generated topics, the following script was created to place all the topics content into one single file, to compare and understands the similarities.

```sh
python3 unite_topics_in_one_file.py
```

