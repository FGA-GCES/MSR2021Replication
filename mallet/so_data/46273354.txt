Callback function working with promises but not observables
