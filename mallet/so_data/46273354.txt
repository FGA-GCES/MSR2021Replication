Callback function working with promise but not observables
