How to dynamically stack Promises sequentially
