i'm in the process of creat an nw.js applic that need to show load of pdf's. the pdf are initi download the first time you start the application. in the initi phase i also need to creat a thumbnail for each pdf to be shown in lists.th thumbnail generat itself doesn't seem to be an issu when we had a few pdf's. it work by creat a canva element and have pdf.js draw the first page, and then save the canva to a png.the issu is that pdf.js doesn't seem to unload the pdf between runs. load 20 1mb pdf file usual lead to nw.js use around 500mb ram. now we would have 100+, mayb even thousand of pdfs, so we need to figur out how to free the ram between each thumbnail, sinc at around 80 or so pdfs, nw.js alreadi use 2gb of ram and freez my laptop as it run out of memory.i'v made a simpl test that show this issue:i'v never done anyth like this before. i'v tri to reus the same canva for all thumb but that didn't seem to chang a thing.i'v tri to do a heap snapshot in develop tool to see what take up all the ram, but guess what? it seem to trigger a garbag collect befor do the snapshot, so nw.js goe from 500mb to around 100mb befor do the snapshot. this make me believ that the object are actual mark for delet but that the gc never has the chanc to run befor the comput run out of ram. load 20 file and then just wait doesn't trigger a gc though, and neither doe run out of ram.i'v tri to check the api and document of pdf.js, but i could not find anyth mention how to unload a pdf befor load the next one.ani idea on how i should proceed? an idea i had was to call some extern tool or make a c/c++ lib that i would call use node-ffi, but i'd have to use pdf.js to show the pdf at a later state anyway and i'd imagin i would just run into the same issu again.
