Variable gives me wrong value inside function inside for loop
